{"version":3,"sources":["webpack:///./src/views/Volume.vue?5800","webpack:///./src/views/Volume.vue?aaab","webpack:///./src/api/VolumeApi.js","webpack:///src/views/Volume.vue","webpack:///./src/views/Volume.vue?766f","webpack:///./src/views/Volume.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","form","directives","name","rawName","staticStyle","model","value","callback","$$v","searchKey","expression","slot","on","reloadVolumeList","_v","openNewVolumeModal","$event","openPruneVolumeModal","columns","volumeList","scopedSlots","_u","key","fn","text","record","openVolumeDetail","LongName","openRemoveVolumeModal","showVolumeDrawer","_s","volumeInfo","Name","Driver","Options","Scope","CreatedAt","Mountpoint","callCreateNewVolumeApi","showNewVolumeModal","newVolumeConfig","$set","callPruneVolumeApi","callRemoveVolumeApi","showRemoveVolumeModal","forceRemoveChange","forceRemoveVolume","staticRenderFns","createNewVolume","query","apiResp","axios","get","params","catch","e","$notification","message","description","removeVolume","volumeName","pruneVolume","component"],"mappings":"2IAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,OAAS,SAAS,KAAOP,EAAIQ,OAAO,CAACJ,EAAG,cAAc,CAACA,EAAG,UAAU,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,YAAYC,YAAY,CAAC,MAAQ,SAASL,MAAM,CAAC,YAAc,SAASM,MAAM,CAACC,MAAOd,EAAa,UAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,UAAUD,GAAKE,WAAW,cAAc,CAACd,EAAG,SAAS,CAACQ,YAAY,CAAC,MAAQ,mBAAmBL,MAAM,CAAC,KAAO,SAAS,KAAO,UAAUY,KAAK,YAAY,IAAI,GAAGf,EAAG,cAAc,CAACA,EAAG,UAAU,CAACA,EAAG,WAAW,CAACgB,GAAG,CAAC,MAAQpB,EAAIqB,mBAAmB,CAACjB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,YAAYP,EAAIsB,GAAG,SAAS,GAAGlB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAWa,GAAG,CAAC,MAAQpB,EAAIuB,qBAAqB,CAACnB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,iBAAiBP,EAAIsB,GAAG,SAAS,GAAGlB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,UAAUa,GAAG,CAAC,MAAQ,SAASI,GAAQxB,EAAIyB,sBAAuB,KAAQ,CAACrB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,YAAYP,EAAIsB,GAAG,YAAY,IAAI,IAAI,IAAI,GAAGlB,EAAG,UAAU,CAACQ,YAAY,CAAC,aAAa,QAAQL,MAAM,CAAC,QAAUP,EAAI0B,QAAQ,cAAc1B,EAAI2B,YAAYC,YAAY5B,EAAI6B,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,EAAMC,GAAQ,OAAO7B,EAAG,OAAO,GAAG,CAACA,EAAG,UAAU,CAACA,EAAG,IAAI,CAACgB,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOxB,EAAIkC,iBAAiBD,EAAOE,aAAa,CAACnC,EAAIsB,GAAG,QAAQlB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,cAAcH,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,KAAKa,GAAG,CAAC,MAAQ,SAASI,GAAQ,OAAOxB,EAAIoC,sBAAsBH,EAAOE,aAAa,CAACnC,EAAIsB,GAAG,SAAS,IAAI,SAASlB,EAAG,WAAW,CAACG,MAAM,CAAC,UAAY,QAAQ,MAAQ,QAAQ,MAAQ,OAAO,QAAUP,EAAIqC,kBAAkBjB,GAAG,CAAC,MAAQ,SAASI,GAAQxB,EAAIqC,kBAAmB,KAAS,CAACjC,EAAG,QAAQ,CAACE,YAAY,eAAe,CAACF,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,cAAclB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWC,WAAWpC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,iBAAiBlB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWE,aAAarC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,iBAAiBlB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWG,cAActC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,gBAAgBlB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWI,YAAYvC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,qBAAqBlB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWK,gBAAgBxC,EAAG,KAAK,CAACA,EAAG,KAAK,CAACE,YAAY,SAAS,CAACN,EAAIsB,GAAG,qBAAqBlB,EAAG,KAAK,CAACE,YAAY,YAAYC,MAAM,CAAC,MAAQ,SAAS,CAACP,EAAIsB,GAAG,IAAItB,EAAIsC,GAAGtC,EAAIuC,WAAWM,qBAAqBzC,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,QAAQ,OAAS,KAAK,WAAa,MAAMa,GAAG,CAAC,GAAKpB,EAAI8C,wBAAwBjC,MAAM,CAACC,MAAOd,EAAsB,mBAAEe,SAAS,SAAUC,GAAMhB,EAAI+C,mBAAmB/B,GAAKE,WAAW,uBAAuB,CAACd,EAAG,eAAe,CAACG,MAAM,CAAC,KAAOP,EAAIgD,kBAAkB,CAAC5C,EAAG,oBAAoB,CAACA,EAAG,UAAU,CAACG,MAAM,CAAC,YAAc,YAAYM,MAAM,CAACC,MAAOd,EAAIgD,gBAAoB,KAAEjC,SAAS,SAAUC,GAAMhB,EAAIiD,KAAKjD,EAAIgD,gBAAiB,OAAQhC,IAAME,WAAW,2BAA2B,GAAGd,EAAG,oBAAoB,CAACA,EAAG,UAAU,CAACG,MAAM,CAAC,YAAc,YAAYM,MAAM,CAACC,MAAOd,EAAIgD,gBAAsB,OAAEjC,SAAS,SAAUC,GAAMhB,EAAIiD,KAAKjD,EAAIgD,gBAAiB,SAAUhC,IAAME,WAAW,6BAA6B,IAAI,IAAI,GAAGd,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,QAAQ,OAAS,KAAK,WAAa,MAAMa,GAAG,CAAC,GAAKpB,EAAIkD,oBAAoBrC,MAAM,CAACC,MAAOd,EAAwB,qBAAEe,SAAS,SAAUC,GAAMhB,EAAIyB,qBAAqBT,GAAKE,WAAW,yBAAyB,CAAClB,EAAIsB,GAAG,mBAAmBlB,EAAG,UAAU,CAACG,MAAM,CAAC,MAAQ,MAAM,OAAS,KAAK,WAAa,MAAMa,GAAG,CAAC,GAAKpB,EAAImD,qBAAqBtC,MAAM,CAACC,MAAOd,EAAyB,sBAAEe,SAAS,SAAUC,GAAMhB,EAAIoD,sBAAsBpC,GAAKE,WAAW,0BAA0B,CAACd,EAAG,aAAa,CAACgB,GAAG,CAAC,OAASpB,EAAIqD,mBAAmBxC,MAAM,CAACC,MAAOd,EAAqB,kBAAEe,SAAS,SAAUC,GAAMhB,EAAIsD,kBAAkBtC,GAAKE,WAAW,sBAAsB,CAAClB,EAAIsB,GAAG,iBAAiB,IAAI,IACpkIiC,EAAkB,G,+GCCtB,SAASC,EAAgBC,GAAO,WAC1BC,EAAUC,IAAMC,IAAN,kBAA6B,CAACC,OAAQJ,IAOpD,OANAC,EAAQI,OAAM,SAAAC,GACZ,EAAKC,cAAc,SAAS,CAC1BC,QAAS,OACTC,YAAa,8BAGVR,EAGT,SAASS,EAAaC,EAAYd,GAAmB,WAC/CI,EAAUC,IAAMC,IAAN,6BACYQ,EADZ,YAC0Bd,IAOxC,OANAI,EAAQI,OAAM,SAAAC,GACZ,EAAKC,cAAc,SAAS,CAC1BC,QAAS,OACTC,YAAa,8BAGVR,EAGT,SAASW,IAAc,WACjBX,EAAUC,IAAMC,IAAI,qBAOxB,OANAF,EAAQI,OAAM,SAAAC,GACZ,EAAKC,cAAc,SAAS,CAC1BC,QAAS,OACTC,YAAa,8BAGVR,EAGM,OACbF,kBACAW,eACAE,e,YC6EF,GACA,CACE,MAAF,MACE,UAAF,OACE,IAAF,QAGA,CACE,MAAF,MACE,UAAF,SACE,IAAF,UAEA,CACE,MAAF,MACE,UAAF,QACE,IAAF,SAEA,CACE,MAAF,OACE,IAAF,UACE,UAAF,WAGA,CACE,MAAF,KACE,IAAF,SACE,YAAF,CAAI,aAAJ,YAIA,GACE,KADF,WAEI,MAAJ,CACM,KAAN,GACM,oBAAN,EACM,uBAAN,EACM,kBAAN,EACM,mBAAN,EACM,sBAAN,EACM,UAAN,GACM,QAAN,EACM,kBAAN,GACM,gBAAN,KAEE,SAAF,CACI,WADJ,WACM,IAAN,OACA,gCACM,MAAN,gDACA,sBAAU,OAAO,EAAjB,oCAEA,GACI,WAPJ,WAQM,OAAN,gCAGE,QAzBF,WA0BI,KAAJ,oBAEE,QAAF,iCACA,gBACI,iBAAJ,mBACI,iBAAJ,sBAHA,IAII,kBAAJ,YAEM,KAAN,oCACI,mBAAJ,WAEM,KAAN,uBACI,uBAVJ,WAUM,IAAN,OAAM,OAAN,2JACA,sBACA,oDAFA,SAGA,qCAHA,OAGA,EAHA,SAIA,SAJA,EAIA,OAJA,EAIA,IACA,UACA,uDACA,qBACA,0BAEA,0BACA,kBACA,gBAGA,yBAfA,8CAkBI,sBAAJ,YACM,KAAN,yBACM,KAAN,qBACI,iBAAJ,YACM,KAAN,oBACM,KAAN,qBACI,oBAlCJ,WAkCM,IAAN,OAAM,OAAN,2JACA,sBACA,oDAFA,SAGA,wDAHA,OAGA,EAHA,SAIA,SAJA,EAIA,OAJA,EAIA,IACA,UACA,uDACA,qBACA,6BAEA,0BACA,kBACA,gBAEA,4BAdA,8CAgBI,mBAlDJ,WAkDM,IAAN,OAAM,OAAN,2JACA,sBACA,sDAFA,SAGA,gBAHA,OAGA,EAHA,SAIA,SAJA,EAIA,OAJA,EAIA,IACA,UACA,yDACA,qBACA,4BAEA,0BACA,oBACA,gBAEA,2BAdA,8CAgBI,iBAlEJ,WAkEM,IAAN,OAAM,OAAN,sIACA,qBACA,6BAFA,iDChPgV,I,wBCQ5UC,EAAY,eACd,EACAvE,EACAwD,GACA,EACA,KACA,WACA,MAIa,aAAAe,E","file":"js/chunk-d382264a.e14dc1c9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Volume.vue?vue&type=style&index=0&id=e7934cbc&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"imageContainer\"},[_c('a-form',{attrs:{\"layout\":\"inline\",\"form\":_vm.form}},[_c('a-form-item',[_c('a-input',{directives:[{name:\"focus\",rawName:\"v-focus\"}],staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"搜索关键词\"},model:{value:(_vm.searchKey),callback:function ($$v) {_vm.searchKey=$$v},expression:\"searchKey\"}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.25)\"},attrs:{\"slot\":\"prefix\",\"type\":\"search\"},slot:\"prefix\"})],1)],1),_c('a-form-item',[_c('a-space',[_c('a-button',{on:{\"click\":_vm.reloadVolumeList}},[_c('a-icon',{attrs:{\"type\":\"reload\"}}),_vm._v(\" 刷新 \")],1),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openNewVolumeModal}},[_c('a-icon',{attrs:{\"type\":\"plus-circle\"}}),_vm._v(\" 创建 \")],1),_c('a-button',{attrs:{\"type\":\"danger\"},on:{\"click\":function($event){_vm.openPruneVolumeModal = true}}},[_c('a-icon',{attrs:{\"type\":\"delete\"}}),_vm._v(\" 清空无用卷 \")],1)],1)],1)],1),_c('a-table',{staticStyle:{\"margin-top\":\"30px\"},attrs:{\"columns\":_vm.columns,\"data-source\":_vm.volumeList},scopedSlots:_vm._u([{key:\"action\",fn:function(text, record){return _c('span',{},[_c('a-space',[_c('a',{on:{\"click\":function($event){return _vm.openVolumeDetail(record.LongName)}}},[_vm._v(\"详情\")]),_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.openRemoveVolumeModal(record.LongName)}}},[_vm._v(\"删除\")])],1)],1)}}])}),_c('a-drawer',{attrs:{\"placement\":\"right\",\"width\":\"800px\",\"title\":\"详情信息\",\"visible\":_vm.showVolumeDrawer},on:{\"close\":function($event){_vm.showVolumeDrawer = false}}},[_c('table',{staticClass:\"configTable\"},[_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"名称(Name)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.Name))])]),_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"卷模式(Driver)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.Driver))])]),_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"选项(Options)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.Options))])]),_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"作用域(Scope)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.Scope))])]),_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"创建时间(CreatedAt)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.CreatedAt))])]),_c('tr',[_c('td',{staticClass:\"tagTd\"},[_vm._v(\"挂载点(MountPoint)\")]),_c('td',{staticClass:\"contentTd\",attrs:{\"align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.volumeInfo.Mountpoint))])])])]),_c('a-modal',{attrs:{\"title\":\"创建新的卷\",\"okText\":\"创建\",\"cancelText\":\"取消\"},on:{\"ok\":_vm.callCreateNewVolumeApi},model:{value:(_vm.showNewVolumeModal),callback:function ($$v) {_vm.showNewVolumeModal=$$v},expression:\"showNewVolumeModal\"}},[_c('a-form-model',{attrs:{\"form\":_vm.newVolumeConfig}},[_c('a-form-model-item',[_c('a-input',{attrs:{\"placeholder\":\"请输入存储卷名称\"},model:{value:(_vm.newVolumeConfig.name),callback:function ($$v) {_vm.$set(_vm.newVolumeConfig, \"name\", $$v)},expression:\"newVolumeConfig.name\"}})],1),_c('a-form-model-item',[_c('a-input',{attrs:{\"placeholder\":\"请输入存储卷模式\"},model:{value:(_vm.newVolumeConfig.driver),callback:function ($$v) {_vm.$set(_vm.newVolumeConfig, \"driver\", $$v)},expression:\"newVolumeConfig.driver\"}})],1)],1)],1),_c('a-modal',{attrs:{\"title\":\"清空无用卷\",\"okText\":\"删除\",\"cancelText\":\"关闭\"},on:{\"ok\":_vm.callPruneVolumeApi},model:{value:(_vm.openPruneVolumeModal),callback:function ($$v) {_vm.openPruneVolumeModal=$$v},expression:\"openPruneVolumeModal\"}},[_vm._v(\" 是否清空无用的存储卷? \")]),_c('a-modal',{attrs:{\"title\":\"删除卷\",\"okText\":\"删除\",\"cancelText\":\"关闭\"},on:{\"ok\":_vm.callRemoveVolumeApi},model:{value:(_vm.showRemoveVolumeModal),callback:function ($$v) {_vm.showRemoveVolumeModal=$$v},expression:\"showRemoveVolumeModal\"}},[_c('a-checkbox',{on:{\"change\":_vm.forceRemoveChange},model:{value:(_vm.forceRemoveVolume),callback:function ($$v) {_vm.forceRemoveVolume=$$v},expression:\"forceRemoveVolume\"}},[_vm._v(\"强制删除(谨慎使用)\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\";\n\nfunction createNewVolume(query) {\n  let apiResp = axios.get(`/api/volume/new`, {params: query})\n  apiResp.catch(e => {\n    this.$notification['error']({\n      message: `操作失败`,\n      description: `操作失败,请检查 Docker 服务是否正常`\n    });\n  });\n  return apiResp\n}\n\nfunction removeVolume(volumeName, forceRemoveVolume) {\n  let apiResp = axios.get(\n      `/api/volume/delete/${volumeName}/${forceRemoveVolume}`)\n  apiResp.catch(e => {\n    this.$notification['error']({\n      message: `操作失败`,\n      description: `操作失败,请检查 Docker 服务是否正常`\n    });\n  });\n  return apiResp\n}\n\nfunction pruneVolume() {\n  let apiResp = axios.get('/api/volume/prune')\n  apiResp.catch(e => {\n    this.$notification['error']({\n      message: `操作失败`,\n      description: `操作失败,请检查 Docker 服务是否正常`\n    });\n  });\n  return apiResp\n}\n\nexport default {\n  createNewVolume,\n  removeVolume,\n  pruneVolume\n}\n","<template>\n  <div class=\"imageContainer\">\n    <a-form layout=\"inline\" :form=\"form\">\n      <a-form-item>\n        <a-input placeholder=\"搜索关键词\" style=\"width: 400px\"\n                 v-focus\n                 v-model=\"searchKey\">\n          <a-icon slot=\"prefix\" type=\"search\" style=\"color:rgba(0,0,0,.25)\"/>\n        </a-input>\n      </a-form-item>\n\n\n      <a-form-item>\n        <a-space>\n          <a-button @click=\"reloadVolumeList\">\n            <a-icon type=\"reload\"></a-icon>\n            刷新\n          </a-button>\n\n          <a-button type=\"primary\" @click=\"openNewVolumeModal\">\n            <a-icon type=\"plus-circle\"></a-icon>\n            创建\n          </a-button>\n\n\n          <a-button type=\"danger\" @click=\"openPruneVolumeModal = true\">\n            <a-icon type=\"delete\"></a-icon>\n            清空无用卷\n          </a-button>\n        </a-space>\n      </a-form-item>\n    </a-form>\n\n    <a-table :columns=\"columns\" :data-source=\"volumeList\" style=\"margin-top: 30px\">\n    <span slot=\"action\" slot-scope=\"text, record\">\n      <a-space>\n        <a @click=\"openVolumeDetail(record.LongName)\">详情</a>\n        <a-divider type=\"vertical\"></a-divider>\n        <a href=\"#\" @click=\"openRemoveVolumeModal(record.LongName)\">删除</a>\n      </a-space>\n    </span>\n    </a-table>\n\n\n    <a-drawer\n        placement=\"right\"\n        width=\"800px\"\n        title=\"详情信息\"\n        @close=\"showVolumeDrawer = false\"\n        :visible=\"showVolumeDrawer\">\n\n      <table class=\"configTable\">\n        <tr>\n          <td class=\"tagTd\">名称(Name)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.Name}}</td>\n        </tr>\n        <tr>\n          <td class=\"tagTd\">卷模式(Driver)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.Driver}}</td>\n        </tr>\n        <tr>\n          <td class=\"tagTd\">选项(Options)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.Options}}</td>\n        </tr>\n        <tr>\n          <td class=\"tagTd\">作用域(Scope)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.Scope}}</td>\n        </tr>\n        <tr>\n          <td class=\"tagTd\">创建时间(CreatedAt)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.CreatedAt}}</td>\n        </tr>\n        <tr>\n          <td class=\"tagTd\">挂载点(MountPoint)</td>\n          <td class=\"contentTd\" align=\"left\"> {{volumeInfo.Mountpoint}}</td>\n        </tr>\n      </table>\n    </a-drawer>\n\n    <a-modal v-model=\"showNewVolumeModal\" title=\"创建新的卷\" okText=\"创建\" cancelText=\"取消\"\n             @ok=\"callCreateNewVolumeApi\">\n      <a-form-model :form=\"newVolumeConfig\">\n        <a-form-model-item>\n          <a-input placeholder=\"请输入存储卷名称\" v-model=\"newVolumeConfig.name\"></a-input>\n        </a-form-model-item>\n\n\n        <a-form-model-item>\n          <a-input placeholder=\"请输入存储卷模式\" v-model=\"newVolumeConfig.driver\"></a-input>\n        </a-form-model-item>\n      </a-form-model>\n\n    </a-modal>\n\n\n    <a-modal v-model=\"openPruneVolumeModal\" title=\"清空无用卷\"\n             okText=\"删除\"\n             @ok=\"callPruneVolumeApi\"\n             cancelText=\"关闭\">\n      是否清空无用的存储卷?\n    </a-modal>\n\n    <a-modal v-model=\"showRemoveVolumeModal\" title=\"删除卷\"\n             okText=\"删除\"\n             @ok=\"callRemoveVolumeApi\"\n             cancelText=\"关闭\">\n      <a-checkbox v-model=\"forceRemoveVolume\" @change=\"forceRemoveChange\">强制删除(谨慎使用)</a-checkbox>\n    </a-modal>\n\n  </div>\n</template>\n<script>\n  import {mapActions} from \"vuex\";\n  import volumeApi from '../api/VolumeApi'\n  import {guid} from '../utils/index'\n\n  const columns = [\n    {\n      title: '卷名称',\n      dataIndex: 'Name',\n      key: 'Name',\n    },\n\n    {\n      title: '卷模式',\n      dataIndex: 'Driver',\n      key: 'Driver',\n    },\n    {\n      title: '卷范围',\n      dataIndex: 'Scope',\n      key: 'Scope',\n    },\n    {\n      title: '创建时间',\n      key: 'Created',\n      dataIndex: 'Created'\n\n    },\n    {\n      title: '操作',\n      key: 'action',\n      scopedSlots: {customRender: 'action'},\n    },\n  ];\n\n  export default {\n    data() {\n      return {\n        form: {},\n        showNewVolumeModal: false,\n        showRemoveVolumeModal: false,\n        showVolumeDrawer: false,\n        forceRemoveVolume: false,\n        openPruneVolumeModal: false,\n        searchKey: '',\n        columns,\n        currentVolumeName: '',\n        newVolumeConfig: {}\n      };\n    }, computed: {\n      volumeList() {\n        let allVolume = this.$store.state.volume.list;\n        if (this.searchKey !== '' && this.searchKey.trim() !== '') {\n          return allVolume.filter(i => i.LongName.indexOf(this.searchKey) >= 0)\n        }\n        return allVolume;\n      }, volumeInfo() {\n        return this.$store.state.volume.info;\n      }\n    },\n    mounted() {\n      this.updateVolumeList()\n    },\n    methods: {\n      ...mapActions({\n        updateVolumeList: 'updateVolumeList',\n        updateVolumeInfo: 'updateVolumeInfo',\n      }), forceRemoveChange: function (e) {\n        // 强制删除checked变动\n        this.forceRemoveVolume = e.target.checked;\n      }, openNewVolumeModal: function () {\n        // 打开创建volume的模态框\n        this.showNewVolumeModal = true\n      }, async callCreateNewVolumeApi() {\n        let key = guid()\n        this.$message.loading({content: '创建存储卷中，请稍后...', key});\n        let res = await volumeApi.createNewVolume(this.newVolumeConfig)\n        let {Code, Msg} = res.data\n        if (Code === 'OK') {\n          this.$message.info({content: '存储卷创建完成!', key, duration: 2});\n          this.updateVolumeList()\n          this.showNewVolumeModal = false\n        } else {\n          this.$notification['error']({\n            message: '存储卷创建失败',\n            description: Msg,\n          });\n\n          this.showNewVolumeModal = false\n        }\n\n      }, openRemoveVolumeModal: function (volumeName) {\n        this.showRemoveVolumeModal = true\n        this.currentVolumeName = volumeName\n      }, openVolumeDetail: function (volumeName) {\n        this.showVolumeDrawer = true\n        this.updateVolumeInfo(volumeName)\n      }, async callRemoveVolumeApi() {\n        let key = guid()\n        this.$message.loading({content: '删除存储卷中，请稍后...', key});\n        let res = await volumeApi.removeVolume(this.currentVolumeName, this.forceRemoveVolume);\n        let {Code, Msg} = res.data\n        if (Code === 'OK') {\n          this.$message.info({content: '存储卷删除完成!', key, duration: 2});\n          this.updateVolumeList()\n          this.showRemoveVolumeModal = false\n        } else {\n          this.$notification['error']({\n            message: '存储卷删除失败',\n            description: Msg,\n          });\n          this.showRemoveVolumeModal = false\n        }\n      }, async callPruneVolumeApi() {\n        let key = guid()\n        this.$message.loading({content: '无用删除存储卷中，请稍后...', key});\n        let res = await volumeApi.pruneVolume();\n        let {Code, Msg} = res.data\n        if (Code === 'OK') {\n          this.$message.info({content: '无用存储卷删除完成!', key, duration: 2});\n          this.updateVolumeList()\n          this.openPruneVolumeModal = false\n        } else {\n          this.$notification['error']({\n            message: '无用存储卷删除失败',\n            description: Msg,\n          });\n          this.openPruneVolumeModal = false\n        }\n      }, async reloadVolumeList() {\n        this.updateVolumeList()\n        this.$message.info('存储卷列表刷新完成');\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .ant-drawer-body {\n    padding: 0 !important;\n  }\n\n  .configTable, .configTable tr th, .configTable tr td {\n    border: 1px solid lightgrey;\n  }\n\n  .configTable .tagTd {\n    width: 200px;\n  }\n\n  .configTable {\n    width: 100%;\n    margin-top: 20px;\n    text-align: center;\n    border-collapse: collapse;\n  }\n\n  .contentTd {\n    overflow-wrap: anywhere;\n    padding: 5px 0 5px 10px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Volume.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Volume.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Volume.vue?vue&type=template&id=e7934cbc&scoped=true&\"\nimport script from \"./Volume.vue?vue&type=script&lang=js&\"\nexport * from \"./Volume.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Volume.vue?vue&type=style&index=0&id=e7934cbc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e7934cbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}